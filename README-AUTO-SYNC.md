# üöÄ Sistema de Auto-Sync RDO-C

Sistema completo de automa√ß√£o para sincroniza√ß√£o autom√°tica com o reposit√≥rio GitHub [TS_RDO](https://github.com/Reifonas/TS_RDO.git).

## üìã Funcionalidades

- ‚úÖ **Sincroniza√ß√£o Autom√°tica**: Detecta mudan√ßas e faz commit/push autom√°tico
- ‚úÖ **GitHub Actions**: Deploy autom√°tico no reposit√≥rio remoto
- ‚úÖ **Git Hooks**: Automa√ß√£o local com valida√ß√µes
- ‚úÖ **Monitoramento de Arquivos**: Watch em tempo real das mudan√ßas
- ‚úÖ **Sistema de Backup**: Backup autom√°tico com rollback
- ‚úÖ **Logs Detalhados**: Sistema completo de logging e notifica√ß√µes
- ‚úÖ **Interface Unificada**: Script principal para gerenciar tudo

## üõ†Ô∏è Pr√©-requisitos

### Software Necess√°rio
- **Git** (vers√£o 2.0+)
- **Node.js** (vers√£o 16+)
- **NPM** ou **PNPM**
- **PowerShell** 5.1+ (Windows)

### Verificar Depend√™ncias
```powershell
# Verificar Git
git --version

# Verificar Node.js
node --version

# Verificar NPM
npm --version
```

## üì¶ Instala√ß√£o

### 1. Configura√ß√£o Inicial
```powershell
# Navegar para o diret√≥rio do projeto
cd C:\Users\Marcos\Documents\GitHub\RDO-C

# Executar configura√ß√£o inicial
.\scripts\start-auto-sync.ps1 -Action setup
```

### 2. Configurar Git (se necess√°rio)
```powershell
# Configurar usu√°rio Git
git config user.name "Seu Nome"
git config user.email "seu.email@exemplo.com"

# Verificar reposit√≥rio remoto
git remote -v
```

### 3. Configurar Git Hooks
```powershell
# Executar script de configura√ß√£o dos hooks
.\scripts\setup-git-hooks.ps1
```

### 4. Testar Sistema
```powershell
# Executar testes do sistema
.\scripts\start-auto-sync.ps1 -Action test
```

## ‚öôÔ∏è Configura√ß√£o

### Arquivo de Configura√ß√£o Principal
Edite o arquivo `auto-sync-config.json`:

```json
{
  "repository": {
    "remote_url": "https://github.com/Reifonas/TS_RDO.git",
    "branch": "main",
    "auto_push": true
  },
  "monitoring": {
    "sync_interval": 300,
    "file_watch_enabled": true,
    "excluded_patterns": ["node_modules", ".git", "logs", "temp"]
  },
  "backup": {
    "enabled": true,
    "interval": 3600,
    "max_backups": 10,
    "compress": true
  },
  "logging": {
    "level": "INFO",
    "console_enabled": true,
    "file_enabled": true
  }
}
```

### Configura√ß√£o de Notifica√ß√µes
Edite o arquivo `logging-config.json` para configurar notifica√ß√µes:

```json
{
  "notifications": {
    "desktop": {
      "enabled": true,
      "levels": ["SUCCESS", "ERROR"]
    },
    "email": {
      "enabled": false,
      "smtp_server": "smtp.gmail.com",
      "smtp_port": 587,
      "username": "seu.email@gmail.com",
      "password": "sua_senha_app",
      "to": "destinatario@exemplo.com"
    }
  }
}
```

## üöÄ Uso

### Comandos Principais

#### Iniciar Sistema
```powershell
# Iniciar com configura√ß√µes padr√£o
.\scripts\start-auto-sync.ps1 -Action start

# Iniciar com backup habilitado
.\scripts\start-auto-sync.ps1 -Action start -EnableBackup

# Iniciar com todas as funcionalidades
.\scripts\start-auto-sync.ps1 -Action start -EnableBackup -EnableNotifications -EnableFileWatch
```

#### Parar Sistema
```powershell
.\scripts\start-auto-sync.ps1 -Action stop
```

#### Reiniciar Sistema
```powershell
.\scripts\start-auto-sync.ps1 -Action restart -EnableBackup -EnableNotifications
```

#### Verificar Status
```powershell
.\scripts\start-auto-sync.ps1 -Action status
```

### Par√¢metros Avan√ßados

```powershell
# Configurar intervalos personalizados
.\scripts\start-auto-sync.ps1 -Action start -SyncInterval 180 -BackupInterval 1800

# Modo verbose para debug
.\scripts\start-auto-sync.ps1 -Action start -Verbose

# Modo dry-run (simula√ß√£o)
.\scripts\start-auto-sync.ps1 -Action start -DryRun

# For√ßar execu√ß√£o
.\scripts\start-auto-sync.ps1 -Action start -Force
```

## üìÅ Estrutura de Arquivos

```
RDO-C/
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ start-auto-sync.ps1      # Script principal
‚îÇ   ‚îú‚îÄ‚îÄ auto-sync-github.ps1     # Sincroniza√ß√£o Git
‚îÇ   ‚îú‚îÄ‚îÄ file-watcher.ps1         # Monitoramento de arquivos
‚îÇ   ‚îú‚îÄ‚îÄ backup-rollback.ps1      # Sistema de backup
‚îÇ   ‚îú‚îÄ‚îÄ logging-notifications.ps1 # Logs e notifica√ß√µes
‚îÇ   ‚îî‚îÄ‚îÄ setup-git-hooks.ps1      # Configura√ß√£o de hooks
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îú‚îÄ‚îÄ workflows/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auto-sync-deploy.yml # GitHub Action
‚îÇ   ‚îî‚îÄ‚îÄ SECRETS_SETUP.md         # Configura√ß√£o de secrets
‚îú‚îÄ‚îÄ .git/hooks/
‚îÇ   ‚îú‚îÄ‚îÄ pre-commit               # Hook pr√©-commit
‚îÇ   ‚îî‚îÄ‚îÄ post-commit              # Hook p√≥s-commit
‚îú‚îÄ‚îÄ logs/                        # Arquivos de log
‚îú‚îÄ‚îÄ backups/                     # Backups autom√°ticos
‚îú‚îÄ‚îÄ temp/                        # Arquivos tempor√°rios
‚îú‚îÄ‚îÄ auto-sync-config.json        # Configura√ß√£o principal
‚îú‚îÄ‚îÄ logging-config.json          # Configura√ß√£o de logs
‚îî‚îÄ‚îÄ README-AUTO-SYNC.md         # Este arquivo
```

## üîß Scripts Individuais

### 1. Sincroniza√ß√£o Manual
```powershell
# Sincroniza√ß√£o simples
.\scripts\auto-sync-github.ps1

# Com commit autom√°tico
.\scripts\auto-sync-github.ps1 -AutoCommit

# Com push autom√°tico
.\scripts\auto-sync-github.ps1 -AutoCommit -Push
```

### 2. Backup Manual
```powershell
# Criar backup
.\scripts\backup-rollback.ps1 -Action backup -BackupName "meu_backup"

# Listar backups
.\scripts\backup-rollback.ps1 -Action list

# Restaurar backup
.\scripts\backup-rollback.ps1 -Action restore -BackupName "meu_backup"
```

### 3. Monitoramento de Arquivos
```powershell
# Monitoramento cont√≠nuo
.\scripts\file-watcher.ps1 -Continuous

# Monitoramento com intervalo personalizado
.\scripts\file-watcher.ps1 -Continuous -SyncInterval 120
```

## üîç Monitoramento e Logs

### Localiza√ß√£o dos Logs
- **Logs principais**: `logs/auto-sync-YYYYMMDD.log`
- **Logs de erro**: `logs/error-YYYYMMDD.log`
- **Status do sistema**: `auto-sync-status.json`

### Visualizar Logs em Tempo Real
```powershell
# Windows PowerShell
Get-Content logs\auto-sync-$(Get-Date -Format 'yyyyMMdd').log -Wait

# Ou usando tail (se dispon√≠vel)
tail -f logs/auto-sync-$(Get-Date -Format 'yyyyMMdd').log
```

### N√≠veis de Log
- **ERROR**: Erros cr√≠ticos
- **WARN**: Avisos importantes
- **INFO**: Informa√ß√µes gerais
- **SUCCESS**: Opera√ß√µes bem-sucedidas
- **DEBUG**: Informa√ß√µes de debug (apenas com -Verbose)

## üîî Notifica√ß√µes

### Notifica√ß√µes Desktop
Habilitadas por padr√£o no Windows. Mostra:
- ‚úÖ Sincroniza√ß√µes bem-sucedidas
- ‚ùå Erros de sincroniza√ß√£o
- üíæ Backups criados
- ‚ö†Ô∏è Avisos importantes

### Notifica√ß√µes por Email
Configure no arquivo `logging-config.json`:
1. Habilite `email.enabled = true`
2. Configure servidor SMTP
3. Defina credenciais (use senhas de app para Gmail)

### Webhooks e Integra√ß√µes
Suporta integra√ß√£o com:
- **Slack**: Configure webhook URL
- **Discord**: Configure webhook URL
- **Webhooks personalizados**: Configure URL e formato

## üîí GitHub Actions e Secrets

### Configurar Secrets no GitHub
1. Acesse: `Settings > Secrets and variables > Actions`
2. Adicione os secrets necess√°rios:
   - `REMOTE_REPO_TOKEN`: Token de acesso ao reposit√≥rio
   - `NETLIFY_AUTH_TOKEN`: Token do Netlify (se usar)
   - `NETLIFY_SITE_ID`: ID do site Netlify (se usar)

### Arquivo de Configura√ß√£o
Veja instru√ß√µes detalhadas em `.github/SECRETS_SETUP.md`

## üêõ Solu√ß√£o de Problemas

### Problemas Comuns

#### 1. "Reposit√≥rio n√£o √© um Git"
```powershell
# Inicializar reposit√≥rio Git
git init
git remote add origin https://github.com/Reifonas/TS_RDO.git
```

#### 2. "Configura√ß√£o do Git incompleta"
```powershell
git config user.name "Seu Nome"
git config user.email "seu.email@exemplo.com"
```

#### 3. "Falha na conectividade remota"
```powershell
# Testar conectividade
git ls-remote origin HEAD

# Verificar URL remota
git remote -v

# Reconfigurar se necess√°rio
git remote set-url origin https://github.com/Reifonas/TS_RDO.git
```

#### 4. "Permiss√µes de execu√ß√£o"
```powershell
# Permitir execu√ß√£o de scripts
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

#### 5. "Hooks n√£o funcionam"
```powershell
# Reconfigurar hooks
.\scripts\setup-git-hooks.ps1 -Force

# Verificar permiss√µes
ls -la .git/hooks/
```

### Debug Avan√ßado

```powershell
# Executar com logs detalhados
.\scripts\start-auto-sync.ps1 -Action start -Verbose -LogLevel DEBUG

# Testar componentes individualmente
.\scripts\start-auto-sync.ps1 -Action test

# Verificar status detalhado
.\scripts\start-auto-sync.ps1 -Action status
```

### Logs de Debug
```powershell
# Ver logs de erro
Get-Content logs\error-$(Get-Date -Format 'yyyyMMdd').log

# Ver logs completos
Get-Content logs\auto-sync-$(Get-Date -Format 'yyyyMMdd').log | Select-String "ERROR"
```

## üìà Monitoramento de Performance

### M√©tricas Dispon√≠veis
- N√∫mero de sincroniza√ß√µes
- N√∫mero de backups
- N√∫mero de erros
- Tempo de √∫ltima sincroniza√ß√£o
- Tempo de √∫ltimo backup
- Status do sistema

### Visualizar Estat√≠sticas
```powershell
# Status completo
.\scripts\start-auto-sync.ps1 -Action status

# Verificar arquivo de status
Get-Content auto-sync-status.json | ConvertFrom-Json
```

## üîÑ Atualiza√ß√µes e Manuten√ß√£o

### Atualizar Sistema
1. Fa√ßa backup das configura√ß√µes
2. Pare o sistema: `start-auto-sync.ps1 -Action stop`
3. Atualize os scripts
4. Reinicie: `start-auto-sync.ps1 -Action restart`

### Limpeza de Logs
```powershell
# Limpar logs antigos (mais de 30 dias)
Get-ChildItem logs\*.log | Where-Object {$_.LastWriteTime -lt (Get-Date).AddDays(-30)} | Remove-Item

# Limpar backups antigos
.\scripts\backup-rollback.ps1 -Action cleanup -KeepDays 30
```

### Backup de Configura√ß√£o
```powershell
# Backup das configura√ß√µes
Copy-Item auto-sync-config.json auto-sync-config.json.bak
Copy-Item logging-config.json logging-config.json.bak
```

## üìû Suporte

### Informa√ß√µes do Sistema
```powershell
# Coletar informa√ß√µes para suporte
.\scripts\start-auto-sync.ps1 -Action test > system-info.txt
Get-Content auto-sync-status.json >> system-info.txt
Get-Content logs\auto-sync-$(Get-Date -Format 'yyyyMMdd').log | Select-Object -Last 50 >> system-info.txt
```

### Contato
- **Reposit√≥rio**: [TS_RDO](https://github.com/Reifonas/TS_RDO.git)
- **Issues**: Use o sistema de issues do GitHub
- **Documenta√ß√£o**: Este arquivo README

---

## üìù Changelog

### v1.0.0 (2024)
- ‚úÖ Sistema completo de auto-sync
- ‚úÖ GitHub Actions integradas
- ‚úÖ Git Hooks configurados
- ‚úÖ Sistema de backup e rollback
- ‚úÖ Monitoramento de arquivos
- ‚úÖ Logs detalhados e notifica√ß√µes
- ‚úÖ Interface unificada de gerenciamento

---

**üéâ Sistema RDO-C Auto-Sync pronto para uso!**

Para come√ßar:
```powershell
.\scripts\start-auto-sync.ps1 -Action setup
.\scripts\start-auto-sync.ps1 -Action start -EnableBackup -EnableNotifications
```